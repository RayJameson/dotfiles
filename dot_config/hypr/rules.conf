##############################
### WINDOWS AND WORKSPACES ###
##############################
$waybar_gap = 30

windowrule {
  name = default-no-blur
  no_blur = on
  suppress_event = maximize
  idle_inhibit = fullscreen
  match:class = .*
  match:tag = negative:blurry
}

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules
# Example windowrule
# windowrule = float, class:^(^wezterm-float$|^ghostty\.float$|^kitty-float$|alacritty-float|^Music$)$
windowrule {
  name = copyq
  float = on
  center = on
  no_dim = on
  size = (monitor_w*0.35) (monitor_h*0.65)
  match:class = ^com.github.hluk.copyq$
}

windowrule {
  name = vewnior
  float = on
  size = (monitor_w*0.75) (monitor_h*0.75)
  match:class = ^viewnior$
}

windowrule {
  name = browser-pip
  float = on
  move = (monitor_w-window_w-4) (monitor_h-window_h-4)
  pin = on
  no_dim = on
  keep_aspect_ratio = on
  no_follow_mouse = on
  no_initial_focus = on
  suppress_event = activatefocus
  match:title = ^Picture-in-Picture$
}

windowrule {
  name = mpv-pip
  float = on
  size = (monitor_w*0.2) (monitor_h*0.2)
  move = (monitor_w-window_w-4) (monitor_h-window_h-4)
  pin = on
  no_dim = on
  keep_aspect_ratio = on
  no_follow_mouse = on
  no_initial_focus = on
  suppress_event = activatefocus
  match:class = ^mpv$
}

windowrule {
  name = steam-other-windows
  tag = +popup
  match:class = ^steam$
  match:title = ^$
  match:float = 1
}

windowrule {
  name = pdf-reader
  tag = +popup
  match:class = ^pdf$
}


windowrule {
  name = popup-common-settings
  no_dim = on
  no_follow_mouse = on
  no_initial_focus = on
  match:tag = popup
}

windowrule {
  name = awakened-poe-trade
  float = on
  no_dim = on
  no_follow_mouse = on
  no_initial_focus = on
  match:class = ^awakened-poe-trade$
}

windowrule {
  name = float-modal-windows
  float = on
  match:modal = 1
}

windowrule {
  name = fix-gimp-windows
  float = on
  no_dim = on
  no_follow_mouse = on
  no_initial_focus = on
  match:class = ^gimp$
}

windowrule {
  name = float-sound-controls
  float = on
  match:class = ^([Pp]avucontrol|com.github.wwmm.easyeffects)$
}

windowrule {
  name = pupgui
  float = on
  match:class = ^net.davidotek.pupgui2$
}

windowrule {
  name = easyeffects
  move = (monitor_w-window_w-4) ($waybar_gap+6)
  size = (monitor_w*0.5) (monitor_h*0.75)
  match:class = ^com.github.wwmm.easyeffects$
}

windowrule {
  name = telegram
  focus_on_activate = on
  tag = +private
  match:class = ^org.telegram.desktop$
}

windowrule {
  name = zen
  focus_on_activate = on
  match:class = ^zen$
}


windowrule {
  name = private-windows
  tag = +private
  match:class = (^org.keepassxc.KeePassXC$|^vesktop$|^com.github.hluk.copyq$)
}

windowrule {
  name = disable-screenshare-based-on-tag
  no_screen_share = on
  match:tag = private
}

windowrule {
  name = pavucontrol
  move = (monitor_w-window_w-4) ($waybar_gap+6)
  size = (monitor_w*0.3) (monitor_h*0.42)
  match:class = ^[Pp]avucontrol$
}

windowrule {
  name = blueman-manager
  float = on
  move = (monitor_w-window_w-28) ($waybar_gap+6) # weird bug, window size is bigger for some reason
  size = (monitor_w*0.25) (monitor_h*0.325)
  match:class = [Bb]lueman-manager
}

windowrule {
  name = proton-up
  float = on
  match:title = ^ProtonUp-Qt.+
}

windowrule {
  name = protontricks
  float = on
  match:title = ^Protontricks$
}

windowrule {
  name = xfce4-power-manager-settings
  float = on
  match:class = ^Xfce4-power-manager-settings$
}

windowrule {
  name = network-manager
  float = on
  match:class = ^nm-connection-editor$
}

windowrule {
  name = always-float
  float = on
  match:class = (Pcmanfm|Onboard|Yad)
}

windowrule {
  name = gearlever
  float = on
  match:class = ^it.mijorus.gearlever$
}

windowrule {
  name = steam-main-window
  float = on
  match:class = ^[Ss]team$
  match:title = negative:^([Ss]team|Список друзей|Friends List).*$
}

windowrule {
  name = ghostty
  match:class = ^com\.mitchellh\.ghostty|ghostty\.float$
  tag = +blurry
}

# Ignore maximize requests from apps. You'll probably like this.
windowrule {
  name = ignore-maximize
  render_unfocused = on
  idle_inhibit = fullscreen
  no_dim = on
  no_follow_mouse = on
  match:fullscreen = 1
}

layerrule {
  name = swaync-control-center
  blur = on
  ignore_alpha = 0.1
  no_screen_share = on
  match:namespace = swaync-control-center
}

layerrule {
  name = blur-waybar
  blur = on
  match:namespace = waybar
}

layerrule {
  name = swaync-notification-center
  blur = on
  no_screen_share = on
  ignore_alpha = 0.1
  match:namespace = swaync-notification-window
}


# Fix some dragging issues with XWayland
windowrule {
  name = windowrule-31
  no_focus = on
  match:class = ^$
  match:title = ^$
  match:xwayland = 1
  match:float = 1
  match:fullscreen = 0
  match:pin = 0
}

windowrule {
  name = windowrule-32
  no_dim = on
  no_follow_mouse = on
  no_initial_focus = on
  match:pin = 1
}

# smart gaps
workspace = w[tv1]s[false], gapsout:0, gapsin:0
workspace = w[g]s[false], gapsout:0, gapsin:0
workspace = f[1]s[false], gapsout:0, gapsin:0
windowrule {
  name = smart-gaps-1
  border_size = 0
  rounding = 0
  match:float = 0
  match:workspace = w[tv1]s[false]
}

windowrule {
  name = smart-gaps-2
  border_size = 0
  rounding = 0
  match:float = 0
  match:workspace = f[1]s[false]
}

windowrule {
  name = single-window-on-workspace
  no_blur = on
  no_anim = on
  no_shadow = on
  rounding = 0
  immediate = yes
  match:workspace = f[0]s[false]
  match:tag = negative:blurry
}
